{% extends 'navbar.html.twig' %}

{% block title %}Profile!{% endblock %}

{% block body %}
  <h1>Your Profile</h1>
        <p>Nom: {{ user.nom }}</p>
        <p>Email: {{ user.email }}</p>
          {% if app.user == user or 'admin' in app.user.getRoles() %}
        <form method="POST" action="{{ path('user_delete') }}">
            <input type="hidden" name="_token" value="{{ csrf_token('delete_account') }}">
            <button class="btn btn-danger">Delete Account</button>
        </form>
    {% endif %}
        <h2>Informations des projets</h2>
        <!-- Project information will go here -->
<h2>Publications associ√©es</h2>
<table class="table">
  <thead>
      <tr>
          <th>ID</th>
          <th>Title</th>
          <th>Content</th>
          <th>Actions</th>
      </tr>
  </thead>
  <tbody>
  {% for publication in publications %}
      <tr>
          <td>{{ publication.id }}</td>
          <td>{{ publication.title }}</td>
          <td>{{ publication.content }}</td>
          <td>
              {% if app.user == publication.author or 'admin' in app.user.getRoles() %}
                <a href="{{ path('edit_publication', {id: publication.id}) }}">Edit</a>
                <a href="{{ path('delete_publication', {id: publication.id}) }}">Delete</a>
              {% endif %}
          </td>
      </tr>
  {% else %}
      <tr>
          <td colspan="4">No publications found</td>
      </tr>
  {% endfor %}
  </tbody>
</table>

{% include 'footer.html.twig' %}

{% endblock %}
