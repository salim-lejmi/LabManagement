{% extends 'navbar.html.twig' %}

{% block body %}
<h1>Publications</h1>
{% if app.user %}
   <a href="{{ path('new_publication') }}">New Publication</a>
{% endif %}
<table class="table">
   <thead>
       <tr>
           <th>ID</th>
           <th>Title</th>
           <th>Content</th>
           <th>Author</th>
           <th>Actions</th>
       </tr>
   </thead>
   <tbody>
   {% for publication in publications %}
       <tr>
           <td>{{ publication.id }}</td>
           <td>{{ publication.title }}</td>
           <td>{{ publication.content }}</td>
           <td><a href="{{ path('user_profile', {id: publication.author.id}) }}">{{ publication.author.nom }}</a></td>
           <td>
               {% if app.user == publication.author or 'admin' in app.user.getRoles() %}
                  <a href="{{ path('edit_publication', {id: publication.id}) }}">Edit</a>
                  <a href="{{ path('delete_publication', {id: publication.id}) }}">Delete</a>
               {% endif %}
           </td>
       </tr>
   {% else %}
       <tr>
           <td colspan="5">No publications found</td>
       </tr>
   {% endfor %}
   </tbody>
</table>

{% include 'footer.html.twig' %}

{% endblock %}
